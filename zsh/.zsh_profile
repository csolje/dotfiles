#!/bin/zsh
#
# Profile file. Runs on login. Environment variables are set here
#
# Adds `~/.local/bin` to $PATH
#export PATH="$PATH:${$(find ~/.local/bin -type d -print %p:)%%:}"
#unsetopt PROMPT_SP

# Default programs:
export EDITOR="nvim"
export TERMINAL="ghostty"
export TERMINAL_PROG="ghostty"
export TERM="xterm-256color"
#export PAGER="less"
export COLORTERM="truecolor"
export GIT_EDITOR=$EDITOR
export DOTFILES=$HOME/.dotfiles
export GPG_TTY=$(tty)

## All that sweet sweet fzf
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
#source <(fzf --zsh)
source ~/fzf-git.sh/fzf-git.sh
# tmux-sessionizer
bindkey -s '^f' 'tmux-sessionizer\n'

# Export settings
# ~/ Clean-up:
export XDG_CONFIG_HOME="$HOME/.config"
export XDG_DATA_HOME="$HOME/.local/share"
export XDG_CACHE_HOME="$HOME/.cache"

addToPath() {
    if [[ "$PATH" != *"$1"* ]]; then
        export PATH=$PATH:$1
    fi
}

addToPathFront() {
    if [[ "$PATH" != *"$1"* ]]; then
        export PATH=$1:$PATH
    fi
}
#export GOPATH=$HOME/go
#export PATH="$GOPATH/bin:$HOME/bin:$HOME/.local/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/lib/snafpd/snap/bin"
addToPathFront $HOME/bin
addToPathFront $HOME/.local/scripts/
addToPathFront $HOME/.config/emacs
addToPathFront $HOME/.local/bin
addToPathFront $HOME/.cargo/bin
addToPathFront $HOME/.atuin/bin
#compdef gt
###-begin-gt-completions-###
#
# yargs command completion script
#
# Installation: gt completion >> ~/.zshrc
#    or gt completion >> ~/.zprofile on OSX.
#
_gt_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" gt --get-yargs-completions "${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _gt_yargs_completions gt
###-end-gt-completions-###
eval "$(oh-my-posh init zsh --config ~/.config/ohmyposh/zen_v2.toml)"
